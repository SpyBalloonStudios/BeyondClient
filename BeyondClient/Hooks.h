#pragma once

/*
{
	  "Address": 70460720,
	  "Name": "\u00CE\u00CD\u00CF\u00CD\u00CE\u00CC\u00CC\u00CF\u00CD\u00CE\u00CC\u00CD\u00CF\u00CD\u00CF\u00CF\u00CD\u00CE\u00CC\u00CD\u00CE\u00CF\u00CE$$OnPlayerJoined",
	  "Signature": "void _________________________OnPlayerJoined (________________________4234_o* __this, ________________________4015_o* _______________________, const MethodInfo* method);",
	  "TypeSignature": "viii"
	},
	{
	  "Address": 70460992,
	  "Name": "\u00CE\u00CD\u00CF\u00CD\u00CE\u00CC\u00CC\u00CF\u00CD\u00CE\u00CC\u00CD\u00CF\u00CD\u00CF\u00CF\u00CD\u00CE\u00CC\u00CD\u00CE\u00CF\u00CE$$OnPlayerLeft",
	  "Signature": "void _________________________OnPlayerLeft (________________________4234_o* __this, ________________________4015_o* _______________________, const MethodInfo* method);",
	  "TypeSignature": "viii"
	},
	{
	  "Address": 17173088,
	  "Name": "VRC.SDKBase.VRCPlayerApi$$SetNamePlateColor",
	  "Signature": "void VRC_SDKBase_VRCPlayerApi__SetNamePlateColor (VRC_SDKBase_VRCPlayerApi_o* __this, UnityEngine_Color_o col, const MethodInfo* method);",
	  "TypeSignature": "viii"
	},
	{
		"Address": 68464544, //Normal OpRaiseEvent
		"Name": "\u00CC\u00CF\u00CE\u00CE\u00CC\u00CF\u00CD\u00CC\u00CE\u00CF\u00CD\u00CF\u00CD\u00CC\u00CC\u00CF\u00CD\u00CD\u00CE\u00CD\u00CC\u00CE\u00CD$$\u00CD\u00CF\u00CF\u00CC\u00CE\u00CE\u00CD\u00CD\u00CE\u00CF\u00CF\u00CC\u00CC\u00CE\u00CF\u00CC\u00CE\u00CD\u00CE\u00CC\u00CC\u00CD\u00CF",
		"Signature": "bool ________________________________________________ (uint8_t _______________________, Il2CppObject* _______________________, ________________________3931_o* _______________________, ExitGames_Client_Photon_SendOptions_o _______________________, const MethodInfo* method);",
		"TypeSignature": "iiiiii"
	},
	{
		"Address": 68468416, //Photon auth
		"Name": "\u00CC\u00CF\u00CE\u00CE\u00CC\u00CF\u00CD\u00CC\u00CE\u00CF\u00CD\u00CF\u00CD\u00CC\u00CC\u00CF\u00CD\u00CD\u00CE\u00CD\u00CC\u00CE\u00CD$$\u00CE\u00CE\u00CC\u00CC\u00CD\u00CD\u00CE\u00CF\u00CF\u00CE\u00CD\u00CF\u00CD\u00CC\u00CE\u00CE\u00CC\u00CF\u00CD\u00CD\u00CC\u00CE\u00CD",
		"Signature": "bool ________________________________________________ (uint8_t _______________________, Il2CppObject* _______________________, ________________________3931_o* _______________________, ExitGames_Client_Photon_SendOptions_o _______________________, const MethodInfo* method);",
		"TypeSignature": "iiiiii"
	
	
	 {
      "Address": 16807792,
      "Name": "\u00CF\u00CD\u00CD\u00CD\u00CE\u00CE\u00CC\u00CD\u00CC\u00CF\u00CC\u00CD\u00CE\u00CF\u00CC\u00CE\u00CD\u00CE\u00CC\u00CC\u00CC\u00CC\u00CD$$\u00CC\u00CD\u00CE\u00CE\u00CC\u00CF\u00CF\u00CC\u00CD\u00CE\u00CE\u00CC\u00CE\u00CD\u00CF\u00CC\u00CE\u00CC\u00CE\u00CF\u00CE\u00CE\u00CF",
      "Signature": "bool ________________________________________________ (uint8_t _______________________, Il2CppObject* _______________________, ________________________1355_o* _______________________, ExitGames_Client_Photon_SendOptions_o _______________________, const MethodInfo* method);",
      "TypeSignature": "iiiiii"
    },
    {
      "Address": 16816000,
      "Name": "\u00CF\u00CD\u00CD\u00CD\u00CE\u00CE\u00CC\u00CD\u00CC\u00CF\u00CC\u00CD\u00CE\u00CF\u00CC\u00CE\u00CD\u00CE\u00CC\u00CC\u00CC\u00CC\u00CD$$\u00CE\u00CD\u00CD\u00CE\u00CD\u00CF\u00CC\u00CE\u00CE\u00CC\u00CD\u00CF\u00CF\u00CF\u00CE\u00CF\u00CD\u00CC\u00CD\u00CE\u00CE\u00CF\u00CF",
      "Signature": "bool ________________________________________________ (uint8_t _______________________, Il2CppObject* _______________________, ________________________1355_o* _______________________, ExitGames_Client_Photon_SendOptions_o _______________________, const MethodInfo* method);",
      "TypeSignature": "iiiiii"
    },}


*/
#include <filesystem>
namespace fs = std::filesystem;

/*

uint8_t PortaleventCode;
DWORD* PortalcustomEventContent;
RaiseEventOptions* PortalraiseEventOptions;
SendOptions PortalsendOptions;
DWORD* Portalmethodinfo;

uint8_t EmojieventCode;
DWORD* EmojicustomEventContent;
RaiseEventOptions* EmojiraiseEventOptions;
SendOptions EmojisendOptions;
DWORD* Emojimethodinfo;
*/

/*
{
	{
      "Address": 12078736,
      "Name": "TMPro.TextMeshPro$$OnPreRenderObject",
      "Signature": "void TMPro_TextMeshPro__OnPreRenderObject (TMPro_TextMeshPro_o* __this, const MethodInfo* method);",
      "TypeSignature": "vii"
    },
	{
	  "Address": 16039536,
	  "Name": "UnityEngine.UI.Button$$Press",
	  "Signature": "void UnityEngine_UI_Button__Press (UnityEngine_UI_Button_o* __this, const MethodInfo* method);",
	  "TypeSignature": "vii"
	},
	{
	  "Address": 61526048,
	  "Name": "UnityEngine.UI.Text$$UpdateGeometry",
	  "Signature": "void UnityEngine_UI_Text__UpdateGeometry (UnityEngine_UI_Text_o* __this, const MethodInfo* method);",
	  "TypeSignature": "vii"
	},

	{
	  "Address": 69173760,
	  "Name": "TMPro.TextMeshPro$$OnPreRenderObject",
	  "Signature": "void TMPro_TextMeshPro__OnPreRenderObject (TMPro_TextMeshPro_o* __this, const MethodInfo* method);",
	  "TypeSignature": "vii"
	},

		{
	  "Address": 95527360,
	  "Name": "VRC.SDKBase.InputManager$$EnableObjectHighlight",
	  "Signature": "void VRC_SDKBase_InputManager__EnableObjectHighlight (UnityEngine_GameObject_o* obj, bool enable, const MethodInfo* method);",
	  "TypeSignature": "viii"
	},
	{
	  "Address": 95527248,
	  "Name": "VRC.SDKBase.InputManager$$EnableObjectHighlight",
	  "Signature": "void VRC_SDKBase_InputManager__EnableObjectHighlight (UnityEngine_Renderer_o* r, bool enable, const MethodInfo* method);",
	  "TypeSignature": "viii"
	},

	 },
	{
	  "Address": 11899056,
	  "Name": "\u00CC\u00CE\u00CD\u00CD\u00CD\u00CC\u00CE\u00CD\u00CF\u00CE\u00CD\u00CC\u00CD\u00CC\u00CE\u00CC\u00CC\u00CD\u00CD\u00CE\u00CF\u00CE\u00CF$$Awake",
	  "Signature": "void _________________________Awake (________________________427_o* __this, const MethodInfo* method);",
	  "TypeSignature": "vii"
	},
	{
	{
	  "Address": 61307136,
	  "Name": "\u00CF\u00CE\u00CF\u00CE\u00CF\u00CE\u00CF\u00CC\u00CD\u00CC\u00CF\u00CD\u00CF\u00CC\u00CF\u00CE\u00CF\u00CC\u00CF\u00CE\u00CF\u00CE\u00CF$$\u00CF\u00CE\u00CF\u00CD\u00CE\u00CC\u00CC\u00CE\u00CF\u00CC\u00CE\u00CC\u00CC\u00CD\u00CE\u00CF\u00CC\u00CF\u00CC\u00CD\u00CC\u00CE\u00CE",
	  "Signature": "void ________________________________________________ (________________________4362_o* __this, UnityEngine_Renderer_o* _______________________, bool _______________________, const MethodInfo* method);",
	  "TypeSignature": "viiii"
	},
	{

	"Address": 70910528,
	"Name": "UnityEngine.Camera$$Render",
	"Signature": "void UnityEngine_Camera__Render (UnityEngine_Camera_o* __this, const MethodInfo* method);",
	"TypeSignature": "vii"

	{
	  "Address": 96540416,
	  "Name": "VRC.SDKBase.Networking$$Instantiate",
	  "Signature": "UnityEngine_GameObject_o* VRC_SDKBase_Networking__Instantiate (int32_t broadcast, System_String_o* prefabPathOrDynamicPrefabName, UnityEngine_Vector3_o position, UnityEngine_Quaternion_o rotation, const MethodInfo* method);",
	  "TypeSignature": "iiiiii"
	},
*/

namespace Hooks
{
	namespace Renderer {
		void DelayTask(DWORD* Renderer)
		{
			std::this_thread::sleep_for(std::chrono::seconds(5));
			if (Renderer != nullptr)
			{
				Component __rc = Component(Renderer);
				if (__rc.__this != nullptr)
				{
					Gameobject __g = Gameobject(__rc.__gameobject);
					if (__g.GameobjectPointer != nullptr)
					{
						Logger::AddLogEntry(__g.name);
					}
				}
			}
		}

		void (__fastcall* ctorFunc)(RendererStruct::UnityEngine_Renderer_o*, DWORD*);
		void __stdcall ctor(RendererStruct::UnityEngine_Renderer_o* Renderer, DWORD* methodinfo)
		{
			DWORD* Renderer__ = reinterpret_cast<DWORD*>(Renderer);
			if (Renderer__ != nullptr)
			{
				std::thread(DelayTask, Renderer__).detach();
			}

			

			ctorFunc(Renderer, methodinfo);
		}

		void InitHooks() {
			HookFunction(Address::Renderer::ctor, ctor, ctorFunc);
		}
	}

	namespace API {
		void(__fastcall* SendRequestFunc)(const char*, HTTPMethods, DWORD*, DWORD*, bool, bool, float, int, DWORD*, DWORD*, bool, DWORD*);
		void __stdcall SendRequest(const char* endpoint, HTTPMethods method, DWORD* responseContainer, DWORD* requestParams, bool authenticationRequired, bool disablecache, float cacheLifetime, int retrycount, DWORD* credentials, DWORD* formData, bool disablelog, DWORD* methodinfo)
		{
			std::string url = ToString(endpoint);

			if (Config::API::LogApiCalls)
			{
				Logger::AddLogEntry((GetMethodName(method) + " -> " + url), LogRaiser::Api);
			}
			SendRequestFunc(endpoint, method, responseContainer, requestParams, authenticationRequired, disablecache, cacheLifetime, retrycount, credentials, formData, disablelog, methodinfo);
		}

		void InitHooks() {
			HookFunction(Address::API::SendRequest, SendRequest, SendRequestFunc);
		}
	}

	void InitHooks() {
	    API::InitHooks();
		//Renderer::InitHooks();

		HookManager::InitializeHooks();
	}
}